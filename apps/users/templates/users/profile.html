{% extends "layouts/base.html" %}

{% block title %} 
    {{ profile_user.username }}'s Profile - QorA
{% endblock %}

{% block content %}
<div class="layout-grid">

    <!-- Left Column: Activity Feed -->
    <div class="main-column">
        <div class="page-header">
            <h1>Questions from {{ profile_user.username }}</h1>
        </div>

        {% include 'publications/questions_list.html' with questions=questions empty_message="This user hasn't asked any questions yet." %}
    </div>

    <!-- Right Column: User Info Sidebar -->
    <aside class="sidebar-column">
        <div class="card profile-card">
            
            <!-- Avatar -->
            <div class="profile-avatar">
                {{ profile_user.username|slice:":1" }}
            </div>

            <h2 class="profile-name">{{ profile_user.username }}</h2>
            
            {% if profile_user.first_name %}
                <p class="text-muted">{{ profile_user.first_name }} {{ profile_user.last_name }}</p>
            {% endif %}

            <!-- Stats -->
            <div class="profile-stats">
                <div class="stat-item">
                    <span class="stat-value">{{ followers_count }}</span>
                    <span class="stat-label">Followers</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">{{ following_count }}</span>
                    <span class="stat-label">Following</span>
                </div>
            </div>

            <p class="profile-joined">
                Joined {{ profile_user.date_joined|date:"F Y" }}
            </p>

            <!-- Action Buttons -->
            {% if user.is_authenticated and user != profile_user %}
                <div>
                    {% if is_following %}
                        <button 
                            class="btn btn-outline btn-block js-follow-btn" 
                            data-action="unfollow"
                            data-follow-url="{% url 'follow_user' profile_user.id %}"
                            data-unfollow-url="{% url 'unfollow_user' profile_user.id %}">
                            Unfollow
                        </button>
                    {% else %}
                         <button 
                            class="btn btn-secondary btn-block js-follow-btn" 
                            data-action="follow"
                            data-follow-url="{% url 'follow_user' profile_user.id %}"
                            data-unfollow-url="{% url 'unfollow_user' profile_user.id %}">
                            Follow
                        </button>
                    {% endif %}
                </div>
            {% endif %}
        </div>
    </aside>

</div>
{% endblock %}